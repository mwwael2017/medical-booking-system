(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75254,e=>{"use strict";var s=e.i(71645);let a=e=>{let s=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,a)=>a?a.toUpperCase():s.toLowerCase());return s.charAt(0).toUpperCase()+s.slice(1)},i=(...e)=>e.filter((e,s,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===s).join(" ").trim();var t={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,s.forwardRef)(({color:e="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:n,className:r="",children:c,iconNode:d,...o},m)=>(0,s.createElement)("svg",{ref:m,...t,width:a,height:a,stroke:e,strokeWidth:n?24*Number(l)/Number(a):l,className:i("lucide",r),...!c&&!(e=>{for(let s in e)if(s.startsWith("aria-")||"role"===s||"title"===s)return!0})(o)&&{"aria-hidden":"true"},...o},[...d.map(([e,a])=>(0,s.createElement)(e,a)),...Array.isArray(c)?c:[c]])),n=(e,t)=>{let n=(0,s.forwardRef)(({className:n,...r},c)=>(0,s.createElement)(l,{ref:c,iconNode:t,className:i(`lucide-${a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...r}));return n.displayName=a(e),n};e.s(["default",()=>n],75254)},18566,(e,s,a)=>{s.exports=e.r(76562)},88927,e=>{"use strict";var s=e.i(43476),a=e.i(71645),i=e.i(18566),t=e.i(75254);let l=(0,t.default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),n=(0,t.default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),r=(0,t.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),c=(0,t.default)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);function d({params:e}){let[t,d]=(0,a.useState)(null);(0,a.useEffect)(()=>{e.then(e=>d(e.doctorId))},[e]);let o=(0,i.useRouter)(),[m,h]=(0,a.useState)(1),[u,p]=(0,a.useState)(null),[x,j]=(0,a.useState)(new Date().toISOString().split("T")[0]),[v,y]=(0,a.useState)([]),[N,b]=(0,a.useState)(!1),[g,f]=(0,a.useState)(null),[k,C]=(0,a.useState)("Online"),[S,w]=(0,a.useState)({name:"",email:"",phone:"",notes:""}),[T,$]=(0,a.useState)(!1);(0,a.useEffect)(()=>{t&&fetch("/api/doctors").then(e=>e.json()).then(e=>{let s=e.find(e=>e.id===t);s&&p(s)})},[t]),(0,a.useEffect)(()=>{t&&x&&(b(!0),fetch(`/api/availability?doctorId=${t}&date=${x}`).then(e=>e.json()).then(e=>{y(e),b(!1)}).catch(()=>b(!1)))},[t,x]);let O=async e=>{e.preventDefault(),$(!0);try{(await fetch("/api/bookings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doctorId:t,patientName:S.name,patientEmail:S.email,patientPhone:S.phone,date:`${x}T${g}:00`,type:k,notes:S.notes})})).ok?o.push("/success"):alert("Booking failed. Please try again.")}catch(e){alert("An error occurred.")}finally{$(!1)}};return u?(0,s.jsx)("div",{className:"container section",children:(0,s.jsxs)("div",{className:"booking-layout",children:[(0,s.jsxs)("div",{className:"booking-main",children:[(0,s.jsx)("h2",{children:"Book Appointment"}),(0,s.jsxs)("div",{className:"steps-indicator",children:[(0,s.jsx)("div",{className:`step ${m>=1?"active":""}`,children:"1. Time"}),(0,s.jsx)("div",{className:"line"}),(0,s.jsx)("div",{className:`step ${m>=2?"active":""}`,children:"2. Details"}),(0,s.jsx)("div",{className:"line"}),(0,s.jsx)("div",{className:`step ${m>=3?"active":""}`,children:"3. Pay"})]}),1===m&&(0,s.jsxs)("div",{className:"step-content",children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Select Date"}),(0,s.jsx)("input",{type:"date",className:"form-input",min:new Date().toISOString().split("T")[0],value:x,onChange:e=>{j(e.target.value),f(null)}})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Select Time Slot"}),(0,s.jsx)("div",{className:"slots-grid",children:N?(0,s.jsx)("p",{children:"Loading slots..."}):v.length>0?v.map(e=>(0,s.jsx)("button",{className:`slot-btn ${g===e.time?"selected":""}`,disabled:!e.available,onClick:()=>f(e.time),children:e.time},e.time)):(0,s.jsx)("p",{children:"No slots available."})})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Consultation Type"}),(0,s.jsxs)("div",{className:"type-options",children:[u.consultationTypes.includes("Online")&&(0,s.jsxs)("button",{className:`type-btn ${"Online"===k?"selected":""}`,onClick:()=>C("Online"),children:[(0,s.jsx)(c,{size:18})," Online Video"]}),u.consultationTypes.includes("Clinic")&&(0,s.jsxs)("button",{className:`type-btn ${"Clinic"===k?"selected":""}`,onClick:()=>C("Clinic"),children:[(0,s.jsx)(l,{size:18})," In-Clinic"]})]})]}),(0,s.jsx)("button",{className:"btn btn-primary",disabled:!g,onClick:()=>h(2),children:"Continue to Details"})]}),2===m&&(0,s.jsxs)("div",{className:"step-content",children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Full Name"}),(0,s.jsx)("input",{className:"form-input",value:S.name,onChange:e=>w({...S,name:e.target.value})})]}),(0,s.jsxs)("div",{className:"grid-2",children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Email"}),(0,s.jsx)("input",{type:"email",className:"form-input",value:S.email,onChange:e=>w({...S,email:e.target.value})})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Phone"}),(0,s.jsx)("input",{type:"tel",className:"form-input",value:S.phone,onChange:e=>w({...S,phone:e.target.value})})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Notes / Symptoms (Optional)"}),(0,s.jsx)("textarea",{className:"form-input",rows:3,value:S.notes,onChange:e=>w({...S,notes:e.target.value})})]}),(0,s.jsxs)("div",{className:"actions",children:[(0,s.jsx)("button",{className:"btn btn-outline",onClick:()=>h(1),children:"Back"}),(0,s.jsx)("button",{className:"btn btn-primary",disabled:!S.name||!S.email||!S.phone,onClick:()=>h(3),children:"Continue to Payment"})]})]}),3===m&&(0,s.jsxs)("div",{className:"step-content",children:[(0,s.jsxs)("div",{className:"payment-simulation",children:[(0,s.jsxs)("div",{className:"alert-box",children:[(0,s.jsx)(r,{size:20}),(0,s.jsx)("p",{children:"This is a simulated secure payment."})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Card Details"}),(0,s.jsxs)("div",{className:"fake-card-input",children:[(0,s.jsx)(n,{className:"card-icon"}),(0,s.jsx)("input",{placeholder:"0000 0000 0000 0000",className:"sub-input",disabled:!0,value:"4242 4242 4242 4242"})]})]}),(0,s.jsxs)("div",{className:"grid-2",children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Expiry"}),(0,s.jsx)("input",{className:"form-input",disabled:!0,value:"12/28"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"CVC"}),(0,s.jsx)("input",{className:"form-input",disabled:!0,value:"123"})]})]})]}),(0,s.jsxs)("div",{className:"actions",children:[(0,s.jsx)("button",{className:"btn btn-outline",onClick:()=>h(2),children:"Back"}),(0,s.jsx)("button",{className:"btn btn-primary",onClick:O,disabled:T,children:T?"Processing...":`Pay $${u.price} & Book`})]})]})]}),(0,s.jsx)("div",{className:"booking-sidebar",children:(0,s.jsxs)("div",{className:"card summary-card",children:[(0,s.jsx)("h3",{children:"Booking Summary"}),(0,s.jsxs)("div",{className:"summary-item",children:[(0,s.jsx)("span",{children:"Doctor"}),(0,s.jsx)("strong",{children:u.name})]}),(0,s.jsxs)("div",{className:"summary-item",children:[(0,s.jsx)("span",{children:"Specialty"}),(0,s.jsx)("strong",{children:u.specialtyName})]}),(0,s.jsx)("hr",{}),(0,s.jsxs)("div",{className:"summary-item",children:[(0,s.jsx)("span",{children:"Date"}),(0,s.jsx)("strong",{children:x})]}),(0,s.jsxs)("div",{className:"summary-item",children:[(0,s.jsx)("span",{children:"Time"}),(0,s.jsx)("strong",{children:g||"-"})]}),(0,s.jsxs)("div",{className:"summary-item",children:[(0,s.jsx)("span",{children:"Type"}),(0,s.jsx)("strong",{children:k})]}),(0,s.jsx)("hr",{}),(0,s.jsxs)("div",{className:"summary-item total",children:[(0,s.jsx)("span",{children:"Total"}),(0,s.jsxs)("span",{children:["$",u.price]})]})]})})]})}):(0,s.jsx)("div",{className:"container section",children:"Loading doctor details..."})}e.s(["default",()=>d],88927)}]);